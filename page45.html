<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>Создание сервера стр.4 - Учебник по NodeJS</title>
    <meta name="keywords" content="" />
    <meta name="description" content="Интернет учебник" />
    <link href="style.css" rel="stylesheet" type="text/css" media="screen" />
    <script type="text/javascript" src="jwplayer/jwplayer.js"></script>
    <meta name="generator" content="TurboSite 1.7.1" />
  </head>

  <body>
    <div id="logo">
      <h1>Учебник по NodeJS</h1>
      <p><em>NodeJs И Express</em></p>
    </div>
    <hr />
    <!-- end #logo -->
    <div id="header">
      <div id="menu">
        <ul>
          <li>
            <a style="font-weight: bold; color: #ffffff" href="index.html"
              >Главная</a
            >
          </li>
          <li>
            <a style="font-weight: bold; color: #ffffff" href="page1.html"
              >Глава 1. Введение в Node js</a
            >
          </li>
          <li>
            <a style="font-weight: bold; color: #ffffff" href="page26.html"
              >Глава 2. Основы работы с Node.js</a
            >
          </li>
          <li>
            <a style="font-weight: bold; color: #ffffff" href="page27.html"
              >Глава 3. Сервер</a
            >
          </li>
          <li>
            <a style="font-weight: bold; color: #ffffff" href="page28.html"
              >Глава 4. Express</a
            >
          </li>
          <li>
            <a style="font-weight: bold; color: #ffffff" href="page29.html"
              >Глава 5. MySQL</a
            >
          </li>
          <li>
            <a style="font-weight: bold; color: #ffffff" href="page31.html"
              >Глава 6. Тесты и вопросы</a
            >
          </li>
          <li>
            <a style="font-weight: bold; color: #ffffff" href="page33.html"
              >Для читателя</a
            >
          </li>
          <li><a style="" href="page57.html">Автор</a></li>
        </ul>
      </div>
      <!-- end #menu -->
    </div>
    <!-- end #header -->
    <!-- end #header-wrapper -->
    <div id="page">
      <div id="content">
        <div class="post">
          <h2 class="title">Создание сервера стр.4</h2>
          <div class="entry">
            <p style="font-size: 18px">
              Для закрепления материала рекомендуется посмотреть видео и решить
              пару вопросов
            </p>
            <p>
              <video
                src="user-video/NodeJsServer.mp4"
                height="300px"
                width="500px"
                controls
              ></video>
            </p>
            <p style="font-size: 18px">
              Также можете выполнить несколько упражнений:
            </p>
            <p style="font-size: 18px; padding-left: 10px; font-weight: 600">

              1. Подключитеь модуль http;
				  <div class="spollers" data-spollers>
					  <button tabindex="-1" class="spollers__spoller" style="border:none; font-size: 18px" data-spoller>Посмотреть ответ </button>
                  <div class="spollers__body">
							const http = require('http');
						</div>
				  </div>
			
            </p>
            <p style="font-size: 18px; padding-left: 10px; font-weight: 600">
              2. Создайте сервер и запустите его;




				  <div class="spollers" data-spollers>
					<button tabindex="-1" class="spollers__spoller" style="border:none; font-size: 18px" data-spoller>Посмотреть ответ </button>
					 <div class="spollers__body">
						http.createServer(function(request, response){ <br>
     
						 &nbsp;   &nbsp;   &nbsp;  	response.end("Hello world!");<br>
					  }).listen(3000);<br>
					 </div>
				</div>


				 
            </p>
            <p style="font-size: 18px; padding-left: 10px; font-weight: 600">
              3. Выполните на него запросы: при переходе на главную страницу
              сервера должно выводится текущее время, с помощью объекта Time, а
              при переходе на несуществующий путь должна показываться ошибка
              404.
				  <div class="spollers" data-spollers>
				   <button tabindex="-1" class="spollers__spoller" style="border:none; font-size: 18px" data-spoller>Посмотреть ответ </button>
					 <div class="spollers__body">
						http.createServer(function(request, response){ <br>
                  	&nbsp;   &nbsp;   &nbsp;     if(request.url!='/'){
								&nbsp;   &nbsp;   &nbsp;  &nbsp; 	response.status(404);
								&nbsp;   &nbsp;   &nbsp;  &nbsp; 	response.end('error404')
								&nbsp;   &nbsp;   &nbsp; 	 }else <br>
							&nbsp;   &nbsp;   &nbsp;  	response.end(New Date().Date.Now);<br>
						 }).listen(3000);<br>

					 </div>
					</div>
            </p>
            <p style="font-size: 18px">
              <a href="page44.html">Назад: Создание сервера стр.3</a>
              |&nbsp;&nbsp;<a href="page13.html"
                ><font color="#ff0000">Далее: Отправка файлов</font></a
              >
            </p>
            <div class="test" id="page45.simpletest" style="clear: both">
              <div
                class="question"
                style="padding-top: 10px; padding-bottom: 10px"
                id="Q0"
              >
                <div style="clear: both">
                  <strong>Порт для создания сервера в NodeJs</strong>
                </div>
                <input type="hidden" id="Q0_h" value="" />
                <input
                  class="button"
                  id="submit_test"
                  type="radio"
                  onClick="I('Q0_h').value=this.value;"
                  name="Q0-var"
                  value="A0"
                />
                2800<br />
                <input
                  class="button"
                  id="submit_test"
                  type="radio"
                  onClick="I('Q0_h').value=this.value;"
                  name="Q0-var"
                  value="A1"
                />
                8800<br />
                <input
                  class="button"
                  id="submit_test"
                  type="radio"
                  onClick="I('Q0_h').value=this.value;"
                  name="Q0-var"
                  value="A2"
                />
                1000<br />
                <input
                  class="button"
                  id="submit_test"
                  type="radio"
                  onClick="I('Q0_h').value=this.value;"
                  name="Q0-var"
                  value="A3"
                />
                3000<br />
                <input
                  class="button"
                  id="submit_test"
                  type="radio"
                  onClick="I('Q0_h').value=this.value;"
                  name="Q0-var"
                  value="A4"
                />
                Любой доступный<br />
              </div>
              <div
                class="question"
                style="padding-top: 10px; padding-bottom: 10px"
                id="Q1"
              >
                <div style="clear: both">
                  <strong
                    >Какой метод пишет в поток ответа некоторое
                    содержимое?</strong
                  >
                </div>
                <input type="hidden" id="Q1_h" value="" />
                <input
                  class="button"
                  id="submit_test"
                  type="radio"
                  onClick="I('Q1_h').value=this.value;"
                  name="Q1-var"
                  value="A0"
                />
                write()<br />
                <input
                  class="button"
                  id="submit_test"
                  type="radio"
                  onClick="I('Q1_h').value=this.value;"
                  name="Q1-var"
                  value="A1"
                />
                writeHead()<br />
                <input
                  class="button"
                  id="submit_test"
                  type="radio"
                  onClick="I('Q1_h').value=this.value;"
                  name="Q1-var"
                  value="A2"
                />
                setHeader()<br />
                <input
                  class="button"
                  id="submit_test"
                  type="radio"
                  onClick="I('Q1_h').value=this.value;"
                  name="Q1-var"
                  value="A3"
                />
                end()<br />
                <input
                  class="button"
                  id="submit_test"
                  type="radio"
                  onClick="I('Q1_h').value=this.value;"
                  name="Q1-var"
                  value="A4"
                />
                delete()<br />
              </div>
              <div
                class="question"
                style="padding-top: 10px; padding-bottom: 10px"
                id="Q2"
              >
                <div style="clear: both">
                  <strong>Поле, содержащее ссылку у метода request</strong>
                </div>
                <input type="hidden" id="Q2_h" value="" />
                <input
                  class="button"
                  id="submit_test"
                  type="radio"
                  onClick="I('Q2_h').value=this.value;"
                  name="Q2-var"
                  value="A0"
                />
                url<br />
                <input
                  class="button"
                  id="submit_test"
                  type="radio"
                  onClick="I('Q2_h').value=this.value;"
                  name="Q2-var"
                  value="A1"
                />
                link<br />
                <input
                  class="button"
                  id="submit_test"
                  type="radio"
                  onClick="I('Q2_h').value=this.value;"
                  name="Q2-var"
                  value="A2"
                />
                code<br />
                <input
                  class="button"
                  id="submit_test"
                  type="radio"
                  onClick="I('Q2_h').value=this.value;"
                  name="Q2-var"
                  value="A3"
                />
                status<br />
              </div>
              <div id="test_result" style="clear: both">
                <input
                  class="submit"
                  type="submit"
                  onclick="checkTest();"
                  value="Завершить тест"
                />
              </div>
            </div>
            <script
              src="user-tests/page45.simpletest.js"
              type="text/javascript"
            ></script>
          </div>
        </div>
      </div>
      <!-- end #content -->
      <div id="sidebar">
        <ul>
          <li>
            <h2>Темы учебника</h2>
            <ul>
              <li>
                <a style="" href="page3.html"
                  >Что такое Node.js. Начало работы</a
                >
              </li>
              <li><a style="" href="page4.html">Первое приложение</a></li>
              <li><a style="" href="page5.html">Модули</a></li>
              <li>
                <a style="" href="page8.html"
                  >Объект global и глобальные переменные</a
                >
              </li>
              <li><a style="" href="page9.html">Асинхронность в Node.js</a></li>
              <li><a style="" href="page10.html">События</a></li>
              <li><a style="" href="page12.html">Stream</a></li>
              <li>
                <a style="" href="page53.html">Методы работы с файлами</a>
              </li>
              <li><a style="" href="page42.html">Создание сервера</a></li>
              <li><a style="" href="page13.html">Отправка файлов</a></li>
              <li>
                <a style="" href="page14.html">Получение данных от клиента</a>
              </li>
              <li>
                <a style="" href="page15.html">Начало работы с Express</a>
              </li>
              <li><a style="" href="page16.html">Отправка ответа</a></li>
              <li><a style="" href="page17.html">Статические файлы</a></li>
              <li>
                <a style="" href="page18.html">POST-запросы и отправка форм</a>
              </li>
              <li><a style="" href="page19.html">Router</a></li>
              <li><a style="" href="page20.html">Создание API</a></li>
              <li><a style="" href="page21.html">Подключение к MySQL</a></li>
              <li>
                <a style="" href="page22.html">Выполнение запросов к MySQL</a>
              </li>
              <li>
                <a style="" href="page51.html">Основные операции с данными</a>
              </li>
              <li><a style="" href="page55.html">Тестирование ч.1</a></li>
              <li><a style="" href="page56.html">Тестирование ч.2</a></li>
            </ul>
          </li>
        </ul>
      </div>
      <!-- end #sidebar -->
      <div style="clear: both">&nbsp;</div>
    </div>
    <!-- end #page -->
    <div id="footer">
      <p>
        Автор: Седых Алексей |
        <a href="http://www.freecsstemplates.org/">Free CSS Templates</a> |
        <a href="http://brullworfel.ru/turbosite">TurboSite</a>
      </p>
    </div>
    <!-- end #footer -->

    <script>

let _slideUp = (target, duration) => {
   if (!target.classList.contains("_slide")) {
     target.classList.add("_slide");
     target.style.transitionProperty = "height, margin, padding"; /* [1.1] */
     target.style.transitionDuration = duration + "ms"; /* [1.2] */
 
     target.style.height = target.offsetHeight + "px"; /* [3] */
     target.offsetHeight;
     target.style.overflow = "hidden"; /* [7] */
     target.style.height = 0; /* [4] */
     target.style.paddingTop = 0; /* [5.1] */
     target.style.paddingBottom = 0; /* [5.2] */
     target.style.marginTop = 0; /* [6.1] */
     target.style.marginBottom = 0; /* [7.2] */
 
     window.setTimeout(() => {
       target.style.display = "none"; /* [8] */
       target.style.removeProperty("height"); /* [9] */
       target.style.removeProperty("padding-top"); /* [10.1] */
       target.style.removeProperty("padding-bottom"); /* [10.2] */
       target.style.removeProperty("margin-top"); /* [11.1] */
       target.style.removeProperty("margin-bottom"); /* [11.2] */
       target.style.removeProperty("overflow"); /* [12] */
       target.style.removeProperty("transition-duration"); /* [13.1] */
       target.style.removeProperty("transition-property"); /* [13.2] */
       target.classList.remove("_slide");
     }, duration);
   }
 };
 
 let _slideDown = (target, duration) => {
   if (!target.classList.contains("_slide")) {
     target.classList.add("_slide");
     target.style.removeProperty("display"); /* [1] */
     let display = window.getComputedStyle(target).display;
     if (display === "none") {
       /* [2] */
       display = "block";
     }
     target.style.display = display;
     let height = target.offsetHeight; /* [3] */
     target.style.overflow = "hidden"; /* [7] */
     target.style.height = 0; /* [4] */
     target.style.paddingTop = 0; /* [5.1] */
     target.style.paddingBottom = 0; /* [5.2] */
     target.style.marginTop = 0; /* [6.1] */
     target.style.marginBottom = 0; /* [6.2] */
     target.offsetHeight;
 
     target.style.transitionProperty = "height, margin, padding"; /* [9.1] */
     target.style.transitionDuration = duration + "ms"; /* [9.2] */
     target.style.height = height + "px"; /* [10] */
     target.style.removeProperty("padding-top"); /* [11.1] */
     target.style.removeProperty("padding-bottom"); /* [11.2] */
     target.style.removeProperty("margin-top"); /* [12.1] */
     target.style.removeProperty("margin-bottom"); /* [12.2] */
     window.setTimeout(() => {
       target.style.removeProperty("height"); /* [13] */
       target.style.removeProperty("overflow"); /* [14] */
       target.style.removeProperty("transition-duration"); /* [15.1] */
       target.style.removeProperty("transition-property"); /* [15.2] */
       target.classList.remove("_slide");
     }, duration);
   }
 };
 
 let _slideToggle = (target, duration = 500) => {
   if (window.getComputedStyle(target).display === "none") {
     return _slideDown(target, duration);
   } else {
     return _slideUp(target, duration);
   }
 };






      //Работа со спойлерами
      //У родителей спойлеров добавляем атрибут data-spollers
      //Если хотим чтобы работал на экранах ниже или больше опр. значения то пишем в атрибуте число и ,min max соответсвтенно
      // data-spollers="800,max" - работает на экранах меньше 800 px
      //Если должен работать всегда то оставляем пустым : data-spollers
      //Если должен открываться одновременно только один спойлер то добавляем атрибут data-one-spoller
      //Перед элементов который должен что-то открывать или закрвать добавляем элемент:
      //  <button tabindex="-1" class="spollers__spoller" data-spoller>Max spoller</button>
      // И после него само тело спойлера

    

      const spollersArray = document.querySelectorAll("[data-spollers]");
      if (spollersArray.length > 0) {
        const regularSpollers = Array.from(spollersArray).filter((spoller) => {
          return !spoller.dataset.spollers.split(",")[0];
        });

        if (regularSpollers.length > 0) {
          initSpollers(regularSpollers);
        }

        const mediaSpollers = Array.from(spollersArray).filter((spoller) => {
          return spoller.dataset.spollers.split(",")[0];
        });

        if (mediaSpollers.length > 0) {
          const breakPoints = [];
          mediaSpollers.forEach((spoller) => {
            const params = spoller.dataset.spollers;

            const breakpoint = {};
            const paramsArray = params.split(",");
            breakpoint.value = paramsArray[0];
            breakpoint.type = paramsArray[1] ? paramsArray[1].trim() : "max";
            breakpoint.item = spoller;
            breakPoints.push(breakpoint);
          });

          let mediaQueries = breakPoints.map(function (item) {
            return (
              "(" +
              item.type +
              "-width: " +
              item.value +
              "px)," +
              item.value +
              "," +
              item.type
            );
          });

          mediaQueries = mediaQueries.filter((item, index, self) => {
            return self.indexOf(item) === index;
          });

          mediaQueries.forEach((breakpoint) => {
            const paramsArray = breakpoint.split(",");
            const mediaBreakpoint = paramsArray[1];
            const mediaType = paramsArray[2];
            const matchMedia = window.matchMedia(paramsArray[0]);

            const spollersArray = breakPoints.filter((item) => {
              if (item.value === mediaBreakpoint && item.type === mediaType)
                return true;
            });

            matchMedia.addListener(function () {
              initSpollers(spollersArray, matchMedia);
            });

            initSpollers(spollersArray, matchMedia);
          });
        }

        function initSpollers(spollersArray, matchMedia = false) {
          spollersArray.forEach((spollersBlock) => {
            spollersBlock = matchMedia ? spollersBlock.item : spollersBlock;
            if (matchMedia.matches || !matchMedia) {
              spollersBlock.classList.add("_init");
              initSpollersBody(spollersBlock);
              spollersBlock.addEventListener("click", setSpollerAction);
            } else {
              spollersBlock.classList.remove("_init");
              initSpollersBody(spollersBlock, false);
              spollersBlock.removeEventListener("click", setSpollerAction);
            }
          });
        }

        function initSpollersBody(spollersBlock, hideSpollerBody = true) {
          const blockSpollers =
            spollersBlock.querySelectorAll("[data-spoller]");
          if (blockSpollers.length > 0) {
            blockSpollers.forEach((spoller) => {
              if (hideSpollerBody) {
                spoller.removeAttribute("tabindex");
                if (!spoller.classList.contains("_active")) {
                  spoller.nextElementSibling.hidden = true;
                }
              } else {
                spoller.setAttribute("tabindex", "-1");
                spoller.nextElementSibling.hidden = false;
              }
            });
          }
        }

        function setSpollerAction(e) {
          const el = e.target;

          if (el.hasAttribute("data-spoller") || el.closest("[data-spoller]")) {
            const spollerTitle = el.hasAttribute("data-spoller")
              ? el
              : el.closest("[data-spoller]");
            const spollersBlock = spollerTitle.closest("[data-spollers]");
            const oneSpoller = spollersBlock.hasAttribute("data-one-spoller")
              ? true
              : false;

            if (!spollersBlock.querySelectorAll("._slide").length) {
              if (oneSpoller && !spollerTitle.classList.contains("_active")) {
                hideSpollerBody(spollersBlock);
              }
              spollerTitle.classList.toggle("_active");
              _slideToggle(spollerTitle.nextElementSibling, 800);
            }
            e.preventDefault();
          }
        }

        function hideSpollerBody(spollerBlock) {
          const spollerActiveTitle = spollerBlock.querySelector(
            "[data-spoller]._active"
          );
          if (spollerActiveTitle) {
            spollerActiveTitle.classList.remove("_active");
            _slideUp(spollerActiveTitle.nextElementSibling, 800);
          }
        }
      }
    </script>
  </body>
</html>
